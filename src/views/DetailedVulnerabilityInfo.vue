<template>
  <h1 class="title" v-if="currentView">{{ currentView.title }}</h1>
  <div class="nav-bar">
    <div class="single-nav" v-for="nav in vulnerability" :key="nav.id">
      <div>
        <router-link
          class="nav-link"
          :to="baseLink + nav.link"
          @click="changeVulnerabilityView(nav.id)"
          >{{ nav.title.slice(9) }}</router-link
        >
      </div>
    </div>
  </div>

  <div v-if="currentView" class="main-page-container">
    <h3>{{ headlines[0] }}</h3>
    <div>
      {{ currentView.overview }}
    </div>
    <h3>{{ headlines[1] }}</h3>
    <div>
      <div>{{ currentView.firstDescription }}</div>
      <div
        v-for="ulDescription in currentView.ulDescription"
        :key="ulDescription"
      >
        <ul>
          <li>{{ ulDescription }}</li>
        </ul>
      </div>
      <div>{{ currentView.lastDescription }}</div>
    </div>
    <h3>{{ headlines[2] }}</h3>
    <div>
      <div>
        {{ currentView.firstPrevention }}
      </div>
      <div v-for="ulPrevention in currentView.ulPrevention" :key="ulPrevention">
        <ul>
          <li>{{ ulPrevention }}</li>
        </ul>
      </div>
      <div>{{ currentView.lastPrevention }}</div>
    </div>
    <router-link to="/"
      ><button class="btn-back">
        {{ buttonBack }}
      </button></router-link
    >
  </div>
</template>

<script setup lang="ts">
import { useVulnerabilitiesStore } from "@/stores/vulnerabilitiesStore";
const {
  currentView,
  vulnerability,
  changeVulnerabilityView,
  headlines,
  buttonBack,
} = useVulnerabilitiesStore();
const baseLink = "/detailed-vulnerability-info";
</script>
